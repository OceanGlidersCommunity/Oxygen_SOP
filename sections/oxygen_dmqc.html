
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>7. Delayed Mode Quality Control &#8212; Oxygen SOP</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "OceanGlidersCommunity/Oxygen_SOP");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "üí¨ comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8. Data sharing" href="data_sharing.html" />
    <link rel="prev" title="6. Post-recovery operations and calibrations" href="oxygen_post_recovery.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo-ocean-gliders.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Oxygen SOP</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../README.html">
   OceanGliders Oxygen SOP
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="authors_SOP_development_process.html">
   1. Authors and development process
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="oxygen_introduction.html">
   2. Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="oxygen_pre_deployment.html">
   3. Pre-deployment operations and calibrations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="oxygen_mission_execution.html">
   4. Missions execution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="oxygen_rtqc.html">
   5. Required Metadata, Real Time Data Processing &amp; Quality Control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="oxygen_post_recovery.html">
   6. Post-recovery operations and calibrations
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   7. Delayed Mode Quality Control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data_sharing.html">
   8. Data sharing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="oxygen_references.html">
   9. References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="acknowledgement.html">
   10. Acknowledgement
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/sections/oxygen_dmqc.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/OceanGlidersCommunity/Oxygen_SOP"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/OceanGlidersCommunity/Oxygen_SOP/issues/new?title=Issue%20on%20page%20%2Fsections/oxygen_dmqc.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/OceanGlidersCommunity/Oxygen_SOP/edit/main/sections/oxygen_dmqc.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#calculation-of-oxygen-variables">
   7.1. Calculation of oxygen variables
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sensor-drift-correction">
   7.2. Sensor drift correction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sensor-time-response-correction">
   7.3. Sensor time response correction
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-response-correction-1-geomar">
     7.3.1. Time response correction 1 - GEOMAR
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-response-correction-2-imos">
     7.3.2. Time response correction 2 - IMOS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-response-correction-3-uea">
     7.3.3. Time response correction 3 - UEA
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-response-correction-4-altereco">
     7.3.4. Time response correction 4 - AlterEco
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#light-intrusion">
   7.4. Light intrusion
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="delayed-mode-quality-control">
<h1><span class="section-number">7. </span>Delayed Mode Quality Control<a class="headerlink" href="#delayed-mode-quality-control" title="Permalink to this headline">¬∂</a></h1>
<div class="section" id="calculation-of-oxygen-variables">
<h2><span class="section-number">7.1. </span>Calculation of oxygen variables<a class="headerlink" href="#calculation-of-oxygen-variables" title="Permalink to this headline">¬∂</a></h2>
<p>Following <span id="id1">[<a class="reference internal" href="oxygen_references.html#id6">Bittig <em>et al.</em>, 2018</a>]</span>.</p>
</div>
<div class="section" id="sensor-drift-correction">
<h2><span class="section-number">7.2. </span>Sensor drift correction<a class="headerlink" href="#sensor-drift-correction" title="Permalink to this headline">¬∂</a></h2>
<p>Aanderaa describe the in-situ drift characteristics of the 4330 and 4831 series optodes as being &lt; 0.5 % per year and they make no distinction between the standard or fast (‚ÄúF‚Äù-type) foils <span id="id2">[<a class="reference internal" href="oxygen_references.html#id20">Tengberg and Hovdenes, 2014</a>]</span>.
Optodes made after 2016 undergo a ‚Äúburning-in period‚Äù during manufacture and therefore have substantially less drift <span id="id3">[<a class="reference internal" href="oxygen_references.html#id20">Tengberg and Hovdenes, 2014</a>]</span>.
Drift is a function of UV exposure and sampling frequency.
The foil becomes less sensitive and therefore drift is always towards lower oxygen concentrations.
The drift is believed to be due to bleaching of the luminophore foil via ambient light; it is particularly sensitive to fluorescent lights.
The bleaching effect is partly counteracted by a destabilising effect on the luminophore.
Together this manifests as a positive factor on the oxygen concentration (slope &gt; 1) and a positive offset at zero oxygen.</p>
<p><span id="id4">[<a class="reference internal" href="oxygen_references.html#id5">Queste <em>et al.</em>, 2018</a>]</span> recorded drifts of 0.0176 and 0.0109 <span class="math notranslate nohighlight">\(\mu\)</span>mol/kg/day for two Seagliders using inflections in the oxygen profiles as the glider penetrated to Arabian Sea Oxygen Minimum Zone and the sodium sulphite method, but no Winklers.
<span id="id5">[<a class="reference internal" href="oxygen_references.html#id4">Bittig and K√∂rtzinger, 2015</a>]</span> report a 10 % drift over 3 years, but this is a combination of in-situ and ex-situ drift.
<span id="id6">[<a class="reference internal" href="oxygen_references.html#id6">Bittig <em>et al.</em>, 2018</a>]</span> determined the drift to be typically 0.1-0.2 % per year in-situ.
A drift of 0.0004 % d-1 has been calculated based on UEA seagliders against Baltic deep water oxygen climatology <span id="id7">[<a class="reference internal" href="oxygen_references.html#id23">Possenti <em>et al.</em>, 2021</a>]</span>.
Tom Hull found values between 0.0004 and 0.0035 % d-1 across 16 vehicles in-situ (slocums and seagliders with 4330F (old foil formulation), 4835 and 4831 optodes (unpublished?).</p>
<p>The drift correction should be applied to the oxygen concentration, not the measured phase <span id="id8">[<a class="reference internal" href="oxygen_references.html#id6">Bittig <em>et al.</em>, 2018</a>]</span>.</p>
</div>
<div class="section" id="sensor-time-response-correction">
<span id="dmqc-time-response"></span><h2><span class="section-number">7.3. </span>Sensor time response correction<a class="headerlink" href="#sensor-time-response-correction" title="Permalink to this headline">¬∂</a></h2>
<p>In all but the most homogeneous waters it is essential to correct for the slow time response of optodes <span id="id9">[<a class="reference internal" href="oxygen_references.html#id8">Bittig <em>et al.</em>, 2014</a>]</span>, <span id="id10">[<a class="reference internal" href="oxygen_references.html#id7">Bittig and Koertzinger, 2017</a>]</span> (see <a class="reference internal" href="#kelvin-lag"><span class="std std-numref">Fig. 7.1</span></a>).
This is particularly critical for optodes using the ‚Äústandard‚Äù black foils, and as previously mentioned Slocum gliders with the optode in the standard location near the tail of the glider <span id="id11">[<a class="reference internal" href="oxygen_references.html#id24">Moat <em>et al.</em>, 2016</a>]</span>.</p>
<!--
![Example uncorrected profiles from AlterEco AE5 ‚ÄúKelvin‚Äù Slocum with a 4831 optode with standard foil demonstrating significant lag in both optode temperature and phase.](/images/kelvin_lag.png)
-->
<div class="figure align-default" id="kelvin-lag">
<a class="bg-primary mb-1 reference internal image-reference" href="../_images/kelvin_lag.png"><img alt="Lag example" class="bg-primary mb-1" src="../_images/kelvin_lag.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 7.1 </span><span class="caption-text">Example uncorrected profiles from AlterEco AE5 ‚ÄúKelvin‚Äù Slocum with a 4831 optode with standard foil demonstrating significant lag in both optode temperature and phase.</span><a class="headerlink" href="#kelvin-lag" title="Permalink to this image">¬∂</a></p>
</div>
<p>Correction requires the collection of optode phase, temperature and time.
Therefore the instruments and gliders should be configured to collect these variables and not just oxygen concentration or saturation.
If only optode temperature and concentration are recorded, routines exist to recalculate phase, but this can introduce some inaccuracy and is best avoided.
Accurate time-stamps for these data are required to be able to perform this correction.
Many data processing routines may remove these timestamps, such as to place the oxygen data on the same time-axis as the CTD,
but for best results the oxygen sensor time should be used for the time response correction before interpolating to match the CTD.
Users should be aware that many gliders have independent guidance-control computers and sensor computers and timestamps may differ between them.
An important note is which temperature, be it optode or CTD, is used for the correction.
The optode temperature typically has a lower accuracy and a slower response.</p>
<p>The lag is caused by a combination of factors, the relevance of these changes depending on the environment, optode type and glider platform.
The rate of diffusion across the membrane (foil) is controlled by the water temperature and the thickness of the foil.
Diffusion across the boundary layer above the membrane is also temperature dependent,
but also influenced by the flow of water, which is determined by the position of the sensor and the glider speed and/or angle of attack.
Lastly geometric lag is caused by a delay in water reaching the sensor due to glider geometry and the flow path of the surrounding water.</p>
<p>The boundary layer diffusion lag and the geometric lag will also affect the optode temperature response, which itself may have a time response due to the type of PRT used.
As noted above, the type 3835 optodes have particularly slow responding temperature sensors and it is typical for users to use the CTD temperature in these instances.</p>
<p>The ideal correction method is still a point of discussion.
We suggest users try each of these procedures and assess how well they work for their own use case.</p>
<div class="section" id="time-response-correction-1-geomar">
<h3><span class="section-number">7.3.1. </span>Time response correction 1 - GEOMAR<a class="headerlink" href="#time-response-correction-1-geomar" title="Permalink to this headline">¬∂</a></h3>
<p>Optode calibration and processing methods were developed by Johannes Hahn in collaboration with Henry Bittig for use on moored and glider-attached Aanderaa optodes.
A set of routines were adapted to the particuliarities of optodes on gliders and to the typical conditions of GEOMAR glider deployments. This processing has now
been used on nearly 100 glider deployments mostly in the Tropical Atlantic and Pacific Oceans <span id="id12">[<a class="reference internal" href="oxygen_references.html#id28">Krahmann <em>et al.</em>, 2021</a>]</span>.
The processing determines two delay time constants. One <span class="math notranslate nohighlight">\(\tau_{CTD}\)</span> describes the time constant of an exponential filter which, when applied to the glider‚Äôs CTD temperature,
gives an estimate of the temperature of the optode foil. And the other describes the optode response time to changing oxygen concentrations.
The processing so far makes no explicit correction for the ‚Äúgeometric‚Äù lag, that is any lag introduced by the CTD and optode being some distance from each other.
This ‚Äúgeometric‚Äù lag should be of the order of a few seconds and thus is significantly smaller than the other two delay time constants.
Implementing and correcting such a lag should however be fairly simple.</p>
<p>To determine the two time constants a number of steps are performed:</p>
<ol class="simple">
<li><p>Linearly interpolate optode phase, optode temp, CTD temp, pressure and salinity variables onto 1 sec grid to avoid issues from different measurement times.</p></li>
<li><p>A set of foil temperatures is estimated by applying an exponential filter to the CTD temperature with time scales from 10 to 50 seconds (in steps of 5 sec), thereby creating different ‚Äòvirtual‚Äô foil temperatures.</p></li>
<li><p>With this set of virtual foil temperatures oxygen concentrations are calculated using either the Aanderaa supplied or the own-calibration derived set of optode coefficients.</p></li>
<li><p>For each of the resulting oxygen concentrations a reverse exponential filter with time scales of 0 to 200 seconds (in steps of 20 sec) is applied to create sets of oxygen concentration profiles.</p></li>
<li><p>These sets of concentration profiles are then filtered with a forward-backward filter (MATLAB <code class="docutils literal notranslate"><span class="pre">filtfilt</span></code>) to remove the noise introduced by the reverse filtering. Currently a fixed time constant of 40 seconds is used for this filter. Depending on whether fast or slow foils are used, other values might deliver better results.</p></li>
<li><p>All concentrations are gridded to a 1 dbar grid (first binned and then linearly interpolated to the full dbar).</p></li>
<li><p>Differences between all up-down pairs are calculated and summed up for each of the concentration sets.</p></li>
<li><p>The one delay pair (CTD-temp delay for virtual foil temperature &amp; Optode response delay) with the smallest difference sum is chosen and applied to the whole deployment.</p></li>
<li><p>Typically the ‚Äòbest‚Äô delays are CTD-temp: 30-100 seconds, optode response : 20-50 seconds.</p></li>
<li><p>Included into the optimization are only up-down pairs that were not influenced by obvious bio-fouling.</p></li>
</ol>
<!--
![Example of original Optode oxygen concentrations (red) and GEOMAR processed and calibrated (blue) oxygen concentratins. Shown is a up-down pair from a deployment off Angola. Solid lines are the up and dashed lines the down data. Also shown are calibrated oxygen concentrations from a nearby and contemporaneous CTD cast.](/images/geomar_ox_example.png)
-->
<div class="figure align-default" id="geomar-ox-example">
<a class="bg-primary mb-1 reference internal image-reference" href="../_images/geomar_ox_example.png"><img alt="GEOMAR correction example" class="bg-primary mb-1" src="../_images/geomar_ox_example.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 7.2 </span><span class="caption-text">Example of original Optode oxygen concentrations (red) and GEOMAR processed and calibrated (blue) oxygen concentratins. Shown is a up-down pair from a deployment off Angola. Solid lines are the up and dashed lines the down data. Also shown are calibrated oxygen concentrations from a nearby and contemporaneous CTD cast.</span><a class="headerlink" href="#geomar-ox-example" title="Permalink to this image">¬∂</a></p>
</div>
</div>
<div class="section" id="time-response-correction-2-imos">
<h3><span class="section-number">7.3.2. </span>Time response correction 2 - IMOS<a class="headerlink" href="#time-response-correction-2-imos" title="Permalink to this headline">¬∂</a></h3>
<p>The routine developed by Mun Woo for the IMOS glider toolbox compares up and down casts in pressure space, but applies a time-shift rather than an exponential filter <span id="id13">[<a class="reference internal" href="oxygen_references.html#id27">Woo and Gourcuff, 2021</a>]</span>.
These time-shift values are determined per dive, but a rolling median is calculated to exclude dives with very high or low lag values.</p>
<!-- **NOTE** presumably those dives should be flagged as bad? - TH -->
<p>The advantage of this method is that it does not amplify noise which the filter will tend to do.
However, simply shifting the optode data relative to time will not remove some of the second order effects.</p>
</div>
<div class="section" id="time-response-correction-3-uea">
<h3><span class="section-number">7.3.3. </span>Time response correction 3 - UEA<a class="headerlink" href="#time-response-correction-3-uea" title="Permalink to this headline">¬∂</a></h3>
<p>The routine developed by Bastien Queste for the UEA Seaglider toolbox works as follows:</p>
<ol class="simple">
<li><p>The CTD temperature is aligned based on flight speed to the optode phase using a 1-D interpolation and a flight speed dependent time-shift.
(the optode and seabird temperature are close together on a Seaglider so the time-shift is small).</p></li>
<li><p>Oxygen partial pressure is calculated using the optode phase and time shifted optode temperature.</p></li>
<li><p>Up and down profiles are compared (in pressure or density space depending on environmental conditions) and either:</p>
<ol class="simple">
<li><p>A shoelace algorithm is used to minimise the area between the curves or</p></li>
<li><p>The RMSD from vertically binned data is calculated</p></li>
</ol>
</li>
<li><p>A minimisation algorithm (<code class="docutils literal notranslate"><span class="pre">fminsearch</span></code> from MATLAB) is used to fit two lag coefficients: <span class="math notranslate nohighlight">\(\tau = \tau_0 + \tau_1 (T-20)\)</span> as per &#64;Hahn2014.</p></li>
<li><p>This <span class="math notranslate nohighlight">\(\tau\)</span> is then used with an exponential inverse-filter, typically against optode phase (and oxygen recalculated) but partial pressure or concentration as per <span id="id14">[<a class="reference internal" href="oxygen_references.html#id6">Bittig <em>et al.</em>, 2018</a>]</span> has also been tested.
The correction is applied on a per-dive basis.</p></li>
</ol>
</div>
<div class="section" id="time-response-correction-4-altereco">
<h3><span class="section-number">7.3.4. </span>Time response correction 4 - AlterEco<a class="headerlink" href="#time-response-correction-4-altereco" title="Permalink to this headline">¬∂</a></h3>
<p>For AlterEco many gliders were not collecting data on both up and down casts which precludes the use of the above routines.</p>
<ol class="simple">
<li><p>A <span class="math notranslate nohighlight">\(\tau\)</span> was calculated for the geometric and boundary layer diffusive lag by minimising the difference between the CTD and optode temperatures.</p></li>
<li><p>This <span class="math notranslate nohighlight">\(\tau\)</span> was used to then inverse-filter the optode phase and temperature.</p></li>
<li><p>A secondary lag correction based on the temperature as per the UEA toolbox and <span id="id15">[<a class="reference internal" href="oxygen_references.html#id3">Hahn <em>et al.</em>, 2014</a>]</span>.</p></li>
</ol>
</div>
</div>
<div class="section" id="light-intrusion">
<h2><span class="section-number">7.4. </span>Light intrusion<a class="headerlink" href="#light-intrusion" title="Permalink to this headline">¬∂</a></h2>
<p>Optodes can be sensitive to light intrusion if the foil is damaged.
These instruments will typically still provide good data in the absence of light.
A check should be made for increased sensor noise near the surface during daylight hours and contrast this with night-time observations.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./sections"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="oxygen_post_recovery.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title"><span class="section-number">6. </span>Post-recovery operations and calibrations</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="data_sharing.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title"><span class="section-number">8. </span>Data sharing</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>